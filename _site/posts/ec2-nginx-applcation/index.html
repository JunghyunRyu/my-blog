<!doctype html> <!-- `site.alt_lang` can specify a language different from the UI --> <html lang="ko-KR" > <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"> <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"> <meta name="mobile-web-app-capable" content="yes"> <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><!-- Setup Open Graph image --> <!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지" /> <meta property="og:locale" content="ko_KR" /> <meta name="description" content="AWS EC2에서 Nginx와 FastAPI 애플리케이션 서버를 연결 설정하고 운영하는 방법" /> <meta property="og:description" content="AWS EC2에서 Nginx와 FastAPI 애플리케이션 서버를 연결 설정하고 운영하는 방법" /> <link rel="canonical" href="http://localhost:4000/my-blog/posts/ec2-nginx-applcation/" /> <meta property="og:url" content="http://localhost:4000/my-blog/posts/ec2-nginx-applcation/" /> <meta property="og:site_name" content="정현류의 개발 블로그" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2025-10-12T13:05:00+09:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-10-12T13:05:00+09:00","datePublished":"2025-10-12T13:05:00+09:00","description":"AWS EC2에서 Nginx와 FastAPI 애플리케이션 서버를 연결 설정하고 운영하는 방법","headline":"EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/my-blog/posts/ec2-nginx-applcation/"},"url":"http://localhost:4000/my-blog/posts/ec2-nginx-applcation/"}</script> <!-- End Jekyll SEO tag --> <title>EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지 | 정현류의 개발 블로그 </title> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://realfavicongenerator.net/ --> <link rel="apple-touch-icon" sizes="180x180" href="/my-blog/assets/img/favicons/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/my-blog/assets/img/favicons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/my-blog/assets/img/favicons/favicon-16x16.png"> <link rel="shortcut icon" href="/my-blog/assets/img/favicons/favicon.ico"> <meta name="apple-mobile-web-app-title" content="정현류의 개발 블로그"> <meta name="application-name" content="정현류의 개발 블로그"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/my-blog/assets/img/favicons/browserconfig.xml"> <meta name="theme-color" content="#ffffff"> <!-- Resource Hints --> <link rel="preconnect" href="https://fonts.googleapis.com" > <link rel="dns-prefetch" href="https://fonts.googleapis.com" > <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link rel="dns-prefetch" href="https://fonts.gstatic.com" > <link rel="preconnect" href="https://cdn.jsdelivr.net" > <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" > <!-- Bootstrap --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"> <!-- Theme style --> <link rel="stylesheet" href="/my-blog/assets/css/jekyll-theme-chirpy.css"> <!-- Web Font --> <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"> <!-- Font Awesome Icons --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"> <!-- 3rd-party Dependencies --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"> <!-- Image Popup --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <!-- Scripts --> <script src="/my-blog/assets/js/dist/theme.min.js"></script> <!-- JS selector for site. --> <!-- commons --> <!-- layout specified --> <!-- image lazy-loading & popup & clipboard --> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/ko.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/my-blog/assets/js/dist/post.min.js"></script> <!-- Pageviews --> <!-- A placeholder to allow defining custom metadata --> </head> <body> <!-- The Side Bar --> <aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"> <header class="profile-wrapper"> <a href="/my-blog/" id="avatar" class="rounded-circle"><img src="/my-blog/assets/img/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/my-blog/">정현류의 개발 블로그</a> <p class="site-subtitle fst-italic mb-0">QA Engineer, Learner, Writer</p> </header> <!-- .profile-wrapper --> <nav class="flex-column flex-grow-1 w-100 ps-0"> <ul class="nav"> <!-- home --> <li class="nav-item"> <a href="/my-blog/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>홈</span> </a> </li> <!-- the real tabs --> <li class="nav-item"> <a href="/my-blog/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>카테고리</span> </a> </li> <!-- .nav-item --> <li class="nav-item"> <a href="/my-blog/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>정보</span> </a> </li> <!-- .nav-item --> </ul> </nav> <div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/junghyunryu" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/my-blog/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> </div> <!-- .sidebar-bottom --> </aside> <!-- #sidebar --> <div id="main-wrapper" class="d-flex justify-content-center"> <div class="container d-flex flex-column px-xxl-5"> <!-- The Top Bar --> <header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"> <div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" > <nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/my-blog/">홈</a> </span> <span>EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지</span> </nav> <!-- endof #breadcrumb --> <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button> <div id="topbar-title"> 포스트 </div> <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">취소</button> </div> </header> <div class="row flex-grow-1"> <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"> <!-- Refactor the HTML structure --> <!-- In order to allow a wide table to scroll horizontally, we suround the markdown table with `<div class="table-wrapper">` and `</div>` --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --> <!-- Change the icon of checkbox --> <!-- Handle images --> <!-- Add header for code snippets --> <!-- Create heading anchors --> <!-- return --> <article class="px-1" data-toc="true"> <header> <h1 data-toc-skip>EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지</h1> <p class="post-desc fw-light mb-4">AWS EC2에서 Nginx와 FastAPI 애플리케이션 서버를 연결 설정하고 운영하는 방법</p> <div class="post-meta text-muted"> <!-- published date --> <span> 게시 <!-- Date format snippet See: ${JS_ROOT}/utils/locale-dateime.js --> <time data-ts="1760241900" data-df="YYYY/MM/DD" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2025/10/12 </time> </span> <!-- lastmod date --> <div class="d-flex justify-content-between"> <!-- author(s) --> <span> By <em> <a href="https://github.com/junghyunryu">정현류</a> </em> </span> <div> <!-- pageviews --> <!-- read time --> <!-- Calculate the post's reading time, and display the word count in tooltip --> <!-- words per minute --> <!-- return element --> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="6769 단어" > <em>37 분</em>읽는 시간</span> </div> </div> </div> </header> <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button> </div> <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">바로가기</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"> <div class="header d-flex flex-row align-items-center justify-content-between"> <div class="label text-truncate py-2 ms-4">EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지</div> <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button> </div> <div id="toc-popup-content" class="px-4 py-3 pb-4"></div> </dialog> <div class="content"> <h1 id="ec2-서버에-nginx와-application-server-연결-설정-운영-팁까지">EC2 서버에 Nginx와 Application Server 연결 설정, 운영 팁까지</h1> <p><strong>목표</strong>: AWS EC2(Ubuntu)에서 <strong>FastAPI(Uvicorn)</strong> 애플리케이션을 구동하고, <strong>Nginx</strong>를 리버스 프록시로 앞단에 세워 80 포트로 서비스합니다.</p> <p>추가로 재부팅 후 자동 기동(<strong>systemd</strong>), 정적 파일 서빙, VSCode <strong>SFTP 배포</strong>, <strong>네트워크 이슈/Windows 경로 이스케이프</strong> 등 운영 관점의 디테일까지 다룹니다.</p> <hr /> <h2 id="-목차"><span class="me-2">📋 목차</span><a href="#-목차" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <ol> <li><a href="#1-아키텍처-개요">아키텍처 개요</a></li> <li><a href="#2-선행-준비요약">선행 준비</a></li> <li><a href="#3-애플리케이션-코드">애플리케이션 코드</a></li> <li><a href="#4-부팅-시-자동-실행systemd">부팅 시 자동 실행</a></li> <li><a href="#5-nginx-리버스-프록시-설정">Nginx 리버스 프록시 설정</a></li> <li><a href="#6-정적-파일-배치">정적 파일 배치</a></li> <li><a href="#7-vscode-sftp로-배포-자동화">VSCode SFTP 배포</a></li> <li><a href="#8-운영-체크리스트--트러블슈팅">운영 체크리스트 &amp; 트러블슈팅</a></li> <li><a href="#9-https선택--곧바로-운영-반영-시-권장">HTTPS 설정</a></li> <li><a href="#10-최종-점검-시나리오">최종 점검</a></li> </ol> <hr /> <h2 id="1-아키텍처-개요"><span class="me-2">1) 아키텍처 개요</span><a href="#1-아키텍처-개요" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>[Client] → (80/tcp) → [Nginx on EC2]
                         │
                         └──(127.0.0.1:8000)→ [Uvicorn(FastAPI)]
</pre></td></tr></tbody></table></code></div></div> <h3 id="주요-특징"><span class="me-2">주요 특징</span><a href="#주요-특징" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <ul> <li><strong>외부 접근</strong>: 클라이언트는 <strong>80 포트</strong>로 접속 → Nginx가 수신</li> <li><strong>내부 라우팅</strong>: Nginx가 내부 루프백(127.0.0.1:8000)으로 Uvicorn에 프록시</li> <li><strong>정적 파일</strong>: <code class="language-plaintext highlighter-rouge">/images/</code> 경로는 Nginx가 <strong>직접 서빙</strong> (애플리케이션 서버 우회로 성능 향상)</li> <li><strong>자동 기동</strong>: 애플리케이션은 <strong>systemd</strong>로 관리되어 서버 재부팅 시 자동 실행</li> <li><strong>보안</strong>: 애플리케이션 서버(8000 포트)는 외부에 노출되지 않음</li> </ul> <hr /> <h2 id="2-선행-준비요약"><span class="me-2">2) 선행 준비(요약)</span><a href="#2-선행-준비요약" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <h3 id="ec2-인스턴스-생성-및-접속"><span class="me-2">EC2 인스턴스 생성 및 접속</span><a href="#ec2-인스턴스-생성-및-접속" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>인스턴스 설정</strong></p> <ul> <li><strong>AMI</strong>: Ubuntu 24.04 LTS (또는 22.04 LTS)</li> <li><strong>인스턴스 타입</strong>: t2.micro 이상 (프리티어: t2.micro)</li> <li><strong>키 페어</strong>: 새로 생성하거나 기존 키 사용 (반드시 <code class="language-plaintext highlighter-rouge">.pem</code> 파일 안전하게 보관)</li> </ul> <p><strong>보안 그룹 인바운드 규칙</strong></p> <div class="table-wrapper"><table> <thead> <tr> <th>포트</th> <th>프로토콜</th> <th>소스</th> <th>용도</th> </tr> </thead> <tbody> <tr> <td>22</td> <td>TCP</td> <td>0.0.0.0/0</td> <td>SSH 접속</td> </tr> <tr> <td>80</td> <td>TCP</td> <td>0.0.0.0/0</td> <td>HTTP 웹 서비스</td> </tr> </tbody> </table></div> <blockquote> <p>⚠️ <strong>주의</strong>: 8000 포트는 외부에 열지 마세요. Nginx를 통해서만 접근하도록 합니다.</p> </blockquote> <p><strong>SSH 접속</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c"># Linux/Mac</span>
ssh <span class="nt">-i</span> /경로/키.pem ubuntu@&lt;EC2_Public_IP&gt;

<span class="c"># Windows (PowerShell)</span>
ssh <span class="nt">-i</span> C:<span class="se">\경</span>로<span class="se">\키</span>.pem ubuntu@&lt;EC2_Public_IP&gt;
</pre></td></tr></tbody></table></code></div></div> <h3 id="python-환경-구성"><span class="me-2">Python 환경 구성</span><a href="#python-환경-구성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c"># 시스템 업데이트</span>
<span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt upgrade <span class="nt">-y</span>

<span class="c"># Python 및 가상환경 도구 설치</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> python3 python3-venv python3-pip

<span class="c"># 프로젝트 디렉토리 생성</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/reactbase <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/reactbase

<span class="c"># 가상환경 생성 및 활성화</span>
python3 <span class="nt">-m</span> venv venv
<span class="nb">source </span>venv/bin/activate

<span class="c"># 필수 패키지 설치</span>
pip <span class="nb">install</span> <span class="nt">--upgrade</span> pip
pip <span class="nb">install </span>fastapi uvicorn[standard]
</pre></td></tr></tbody></table></code></div></div> <blockquote> <p>💡 <strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">uvicorn[standard]</code>로 설치하면 websocket, HTTP/2 등 추가 기능을 사용할 수 있습니다.</p> </blockquote> <hr /> <h2 id="3-애플리케이션-코드"><span class="me-2">3) 애플리케이션 코드</span><a href="#3-애플리케이션-코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <h3 id="fastapi-애플리케이션-작성"><span class="me-2">FastAPI 애플리케이션 작성</span><a href="#fastapi-애플리케이션-작성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><code class="language-plaintext highlighter-rouge">~/reactbase/server.py</code> 파일을 생성합니다:</p> <div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">fastapi.responses</span> <span class="kn">import</span> <span class="n">PlainTextResponse</span>
<span class="kn">from</span> <span class="nn">fastapi.staticfiles</span> <span class="kn">import</span> <span class="n">StaticFiles</span>
<span class="kn">import</span> <span class="nn">uvicorn</span>
<span class="kn">import</span> <span class="nn">pathlib</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s">"My API Server"</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s">"EC2에서 구동되는 FastAPI 애플리케이션"</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s">"1.0.0"</span>
<span class="p">)</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">PlainTextResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">read_root</span><span class="p">():</span>
    <span class="s">"""루트 엔드포인트"""</span>
    <span class="k">return</span> <span class="s">"welcome"</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"/hello"</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">PlainTextResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">read_hello</span><span class="p">():</span>
    <span class="s">"""Hello 엔드포인트"""</span>
    <span class="k">return</span> <span class="s">"hello"</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"/world"</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">PlainTextResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">read_world</span><span class="p">():</span>
    <span class="s">"""World 엔드포인트"""</span>
    <span class="k">return</span> <span class="s">"world"</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"/health"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">health_check</span><span class="p">():</span>
    <span class="s">"""헬스 체크 엔드포인트 (모니터링용)"""</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">"status"</span><span class="p">:</span> <span class="s">"healthy"</span><span class="p">,</span> <span class="s">"service"</span><span class="p">:</span> <span class="s">"fastapi"</span><span class="p">}</span>

<span class="c1"># 정적 파일: /home/ubuntu/reactbase/public → /images 경로로 노출
</span><span class="n">static_dir</span> <span class="o">=</span> <span class="n">pathlib</span><span class="p">.</span><span class="n">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="n">resolve</span><span class="p">().</span><span class="n">parent</span>
<span class="n">public_dir</span> <span class="o">=</span> <span class="n">static_dir</span> <span class="o">/</span> <span class="s">"public"</span>

<span class="c1"># public 디렉토리가 없으면 생성
</span><span class="n">public_dir</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># 정적 파일 마운트
</span><span class="n">app</span><span class="p">.</span><span class="n">mount</span><span class="p">(</span><span class="s">"/images"</span><span class="p">,</span> <span class="n">StaticFiles</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">public_dir</span><span class="p">),</span> <span class="n">html</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">"images"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">uvicorn</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s">"0.0.0.0"</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div> <h3 id="로컬-테스트"><span class="me-2">로컬 테스트</span><a href="#로컬-테스트" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c"># 가상환경 활성화 (아직 안 했다면)</span>
<span class="nb">source </span>venv/bin/activate

<span class="c"># 방법 1: Python 직접 실행</span>
python3 server.py

<span class="c"># 방법 2: uvicorn 명령어로 실행 (권장)</span>
uvicorn server:app <span class="nt">--host</span> 0.0.0.0 <span class="nt">--port</span> 8000 <span class="nt">--reload</span>
</pre></td></tr></tbody></table></code></div></div> <blockquote> <p>💡 <strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">--reload</code> 옵션은 코드 변경 시 자동 재시작합니다 (개발 환경에서만 사용).</p> </blockquote> <h3 id="동작-확인"><span class="me-2">동작 확인</span><a href="#동작-확인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>EC2 서버 내부에서 테스트:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c"># 기본 엔드포인트 테스트</span>
curl http://127.0.0.1:8000/
curl http://127.0.0.1:8000/hello
curl http://127.0.0.1:8000/world

<span class="c"># 헬스 체크</span>
curl http://127.0.0.1:8000/health

<span class="c"># API 문서 확인 (FastAPI 자동 생성)</span>
curl http://127.0.0.1:8000/docs
</pre></td></tr></tbody></table></code></div></div> <p><strong>외부에서 테스트 (보안 그룹에 8000 포트가 열려있는 경우만):</strong></p> <p>브라우저에서 <code class="language-plaintext highlighter-rouge">http://&lt;EC2_Public_IP&gt;:8000/</code> 접속 → <code class="language-plaintext highlighter-rouge">"welcome"</code> 확인</p> <blockquote> <p>⚠️ <strong>주의</strong>: 보안 그룹 인바운드에서 8000 포트를 열지 않았다면 외부 접속은 안 됩니다.</p> <p>이것이 정상입니다! Nginx 설정 후에는 80 포트로만 접근하게 됩니다.</p> </blockquote> <hr /> <h2 id="4-부팅-시-자동-실행systemd"><span class="me-2">4) 부팅 시 자동 실행(systemd)</span><a href="#4-부팅-시-자동-실행systemd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>서버가 재부팅되더라도 애플리케이션이 자동으로 시작되도록 systemd 서비스를 설정합니다.</p> <h3 id="systemd-서비스-파일-생성"><span class="me-2">systemd 서비스 파일 생성</span><a href="#systemd-서비스-파일-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><code class="language-plaintext highlighter-rouge">/etc/systemd/system/fastapi.service</code> 파일을 생성합니다:</p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/systemd/system/fastapi.service
</pre></td></tr></tbody></table></code></div></div> <p>아래 내용을 입력:</p> <div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="nn">[Unit]</span>
<span class="py">Description</span><span class="p">=</span><span class="s">FastAPI Application Service</span>
<span class="py">After</span><span class="p">=</span><span class="s">network.target</span>
<span class="py">Documentation</span><span class="p">=</span><span class="s">https://fastapi.tiangolo.com/</span>

<span class="nn">[Service]</span>
<span class="py">Type</span><span class="p">=</span><span class="s">simple</span>
<span class="py">User</span><span class="p">=</span><span class="s">ubuntu</span>
<span class="py">Group</span><span class="p">=</span><span class="s">ubuntu</span>
<span class="py">WorkingDirectory</span><span class="p">=</span><span class="s">/home/ubuntu/reactbase</span>
<span class="py">Environment</span><span class="p">=</span><span class="s">"PATH=/home/ubuntu/reactbase/venv/bin"</span>
<span class="py">ExecStart</span><span class="p">=</span><span class="s">/home/ubuntu/reactbase/venv/bin/uvicorn server:app </span><span class="se">\
</span>    <span class="s">--host 0.0.0.0 </span><span class="se">\
</span>    <span class="s">--port 8000 </span><span class="se">\
</span>    <span class="s">--proxy-headers </span><span class="se">\
</span>    <span class="s">--forwarded-allow-ips="*"</span>

<span class="c"># 재시작 정책
</span><span class="py">Restart</span><span class="p">=</span><span class="s">always</span>
<span class="py">RestartSec</span><span class="p">=</span><span class="s">3</span>

<span class="c"># 프로세스 종료 시간 제한
</span><span class="py">TimeoutStopSec</span><span class="p">=</span><span class="s">10</span>

<span class="c"># 로그 설정 (journalctl로 확인 가능)
</span><span class="py">StandardOutput</span><span class="p">=</span><span class="s">journal</span>
<span class="py">StandardError</span><span class="p">=</span><span class="s">journal</span>
<span class="py">SyslogIdentifier</span><span class="p">=</span><span class="s">fastapi</span>

<span class="nn">[Install]</span>
<span class="py">WantedBy</span><span class="p">=</span><span class="s">multi-user.target</span>
</pre></td></tr></tbody></table></code></div></div> <h3 id="설정-항목-설명"><span class="me-2">설정 항목 설명</span><a href="#설정-항목-설명" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="table-wrapper"><table> <thead> <tr> <th>항목</th> <th>설명</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">After=network.target</code></td> <td>네트워크가 준비된 후에 시작</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">User=ubuntu</code></td> <td>ubuntu 사용자 권한으로 실행</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">WorkingDirectory</code></td> <td>애플리케이션 실행 디렉토리</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--proxy-headers</code></td> <td>Nginx 프록시 헤더 신뢰 (클라이언트 실제 IP 확인)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--forwarded-allow-ips="*"</code></td> <td>모든 프록시에서 forwarded 헤더 허용</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Restart=always</code></td> <td>실패 시 항상 재시작</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">RestartSec=3</code></td> <td>재시작 전 3초 대기</td> </tr> </tbody> </table></div> <h3 id="서비스-활성화-및-시작"><span class="me-2">서비스 활성화 및 시작</span><a href="#서비스-활성화-및-시작" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c"># systemd 데몬 리로드 (새 서비스 파일 인식)</span>
<span class="nb">sudo </span>systemctl daemon-reload

<span class="c"># 부팅 시 자동 시작 활성화</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>fastapi.service

<span class="c"># 서비스 시작</span>
<span class="nb">sudo </span>systemctl start fastapi.service

<span class="c"># 상태 확인</span>
<span class="nb">sudo </span>systemctl status fastapi.service
</pre></td></tr></tbody></table></code></div></div> <h3 id="서비스-관리-명령어"><span class="me-2">서비스 관리 명령어</span><a href="#서비스-관리-명령어" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="c"># 서비스 중지</span>
<span class="nb">sudo </span>systemctl stop fastapi.service

<span class="c"># 서비스 재시작</span>
<span class="nb">sudo </span>systemctl restart fastapi.service

<span class="c"># 서비스 상태 확인</span>
<span class="nb">sudo </span>systemctl status fastapi.service

<span class="c"># 로그 확인 (최근 100줄)</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> fastapi.service <span class="nt">-n</span> 100

<span class="c"># 실시간 로그 모니터링</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> fastapi.service <span class="nt">-f</span>

<span class="c"># 서비스 자동 시작 비활성화</span>
<span class="nb">sudo </span>systemctl disable fastapi.service
</pre></td></tr></tbody></table></code></div></div> <blockquote> <p>💡 <strong>Tip</strong>: 코드를 수정한 후에는 <code class="language-plaintext highlighter-rouge">sudo systemctl restart fastapi.service</code>로 변경사항을 반영하세요.</p> </blockquote> <hr /> <h2 id="5-nginx-리버스-프록시-설정"><span class="me-2">5) Nginx 리버스 프록시 설정</span><a href="#5-nginx-리버스-프록시-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>Nginx를 설치하고 FastAPI 애플리케이션 앞단에 리버스 프록시로 설정합니다.</p> <h3 id="nginx-설치"><span class="me-2">Nginx 설치</span><a href="#nginx-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># Nginx 설치</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> nginx

<span class="c"># Nginx 상태 확인</span>
<span class="nb">sudo </span>systemctl status nginx

<span class="c"># 기본 사이트 비활성화</span>
<span class="nb">sudo rm</span> /etc/nginx/sites-enabled/default
</pre></td></tr></tbody></table></code></div></div> <h3 id="사이트-구성-파일-생성"><span class="me-2">사이트 구성 파일 생성</span><a href="#사이트-구성-파일-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><code class="language-plaintext highlighter-rouge">/etc/nginx/sites-available/reactbase</code> 파일을 생성합니다:</p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/nginx/sites-available/reactbase
</pre></td></tr></tbody></table></code></div></div> <p>아래 내용을 입력:</p> <div class="language-nginx highlighter-rouge"><div class="code-header"> <span data-label-text="Nginx"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
</pre></td><td class="rouge-code"><pre><span class="c1"># HTTP/1.1 업그레이드 지원 (WebSocket용)</span>
<span class="k">map</span> <span class="nv">$http_upgrade</span> <span class="nv">$connection_upgrade</span> <span class="p">{</span>
    <span class="kn">default</span> <span class="s">upgrade</span><span class="p">;</span>
    <span class="kn">''</span> <span class="s">close</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">listen</span> <span class="s">[::]:80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">&lt;EC2_Public_IP_or_Domain&gt;</span><span class="p">;</span>

    <span class="c1"># 보안 헤더</span>
    <span class="kn">server_tokens</span> <span class="no">off</span><span class="p">;</span>
    <span class="kn">add_header</span> <span class="s">X-Content-Type-Options</span> <span class="s">nosniff</span><span class="p">;</span>
    <span class="kn">add_header</span> <span class="s">X-Frame-Options</span> <span class="s">DENY</span><span class="p">;</span>
    <span class="kn">add_header</span> <span class="s">X-XSS-Protection</span> <span class="s">"1</span><span class="p">;</span> <span class="kn">mode=block"</span><span class="p">;</span>

    <span class="c1"># 업로드 파일 크기 제한</span>
    <span class="kn">client_max_body_size</span> <span class="mi">10M</span><span class="p">;</span>

    <span class="c1"># 애플리케이션 서버로 프록시</span>
    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span>
        <span class="kn">proxy_pass</span> <span class="s">http://127.0.0.1:8000</span><span class="p">;</span>

        <span class="c1"># 프록시 헤더 설정</span>
        <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">Host</span>              <span class="nv">$host</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">X-Real-IP</span>         <span class="nv">$remote_addr</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">X-Forwarded-For</span>   <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">X-Forwarded-Proto</span> <span class="nv">$scheme</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">X-Forwarded-Host</span>  <span class="nv">$host</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">X-Forwarded-Port</span>  <span class="nv">$server_port</span><span class="p">;</span>

        <span class="c1"># WebSocket 지원</span>
        <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span>           <span class="nv">$http_upgrade</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">Connection</span>        <span class="nv">$connection_upgrade</span><span class="p">;</span>

        <span class="c1"># 타임아웃 설정</span>
        <span class="kn">proxy_connect_timeout</span> <span class="s">60s</span><span class="p">;</span>
        <span class="kn">proxy_send_timeout</span>    <span class="s">60s</span><span class="p">;</span>
        <span class="kn">proxy_read_timeout</span>    <span class="s">60s</span><span class="p">;</span>

        <span class="c1"># 버퍼링 설정</span>
        <span class="kn">proxy_buffering</span> <span class="no">off</span><span class="p">;</span>
        <span class="kn">proxy_redirect</span> <span class="no">off</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># 정적 파일 직접 서빙 (성능 향상)</span>
    <span class="kn">location</span> <span class="n">/images/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="n">/home/ubuntu/reactbase/public/</span><span class="p">;</span>
        
        <span class="c1"># 보안 및 최적화</span>
        <span class="kn">autoindex</span> <span class="no">off</span><span class="p">;</span>
        <span class="kn">access_log</span> <span class="no">off</span><span class="p">;</span>
        
        <span class="c1"># 캐시 설정</span>
        <span class="kn">expires</span> <span class="s">1h</span><span class="p">;</span>
        <span class="kn">add_header</span> <span class="s">Cache-Control</span> <span class="s">"public,</span> <span class="s">immutable"</span><span class="p">;</span>
        
        <span class="c1"># MIME 타입 자동 설정</span>
        <span class="kn">include</span> <span class="n">/etc/nginx/mime.types</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># 헬스 체크 엔드포인트 (선택)</span>
    <span class="kn">location</span> <span class="n">/health</span> <span class="p">{</span>
        <span class="kn">proxy_pass</span> <span class="s">http://127.0.0.1:8000/health</span><span class="p">;</span>
        <span class="kn">access_log</span> <span class="no">off</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># Favicon 에러 로그 무시 (선택)</span>
    <span class="kn">location</span> <span class="p">=</span> <span class="n">/favicon.ico</span> <span class="p">{</span>
        <span class="kn">access_log</span> <span class="no">off</span><span class="p">;</span>
        <span class="kn">log_not_found</span> <span class="no">off</span><span class="p">;</span>
        <span class="kn">return</span> <span class="mi">204</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <blockquote> <p>💡 <strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">&lt;EC2_Public_IP_or_Domain&gt;</code> 부분은 실제 EC2 Public IP 또는 도메인으로 변경하세요.</p> <p>예: <code class="language-plaintext highlighter-rouge">server_name 3.35.123.456;</code> 또는 <code class="language-plaintext highlighter-rouge">server_name example.com;</code></p> </blockquote> <h3 id="설정-활성화-및-검증"><span class="me-2">설정 활성화 및 검증</span><a href="#설정-활성화-및-검증" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># 심볼릭 링크 생성 (sites-enabled에 연결)</span>
<span class="nb">sudo ln</span> <span class="nt">-s</span> /etc/nginx/sites-available/reactbase /etc/nginx/sites-enabled/

<span class="c"># Nginx 설정 문법 검증</span>
<span class="nb">sudo </span>nginx <span class="nt">-t</span>

<span class="c"># 출력 예시:</span>
<span class="c"># nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span>
<span class="c"># nginx: configuration file /etc/nginx/nginx.conf test is successful</span>
</pre></td></tr></tbody></table></code></div></div> <h3 id="nginx-재시작"><span class="me-2">Nginx 재시작</span><a href="#nginx-재시작" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c"># Nginx 재시작</span>
<span class="nb">sudo </span>systemctl restart nginx

<span class="c"># 상태 확인</span>
<span class="nb">sudo </span>systemctl status nginx
</pre></td></tr></tbody></table></code></div></div> <h3 id="동작-확인-1"><span class="me-2">동작 확인</span><a href="#동작-확인-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>서버 내부에서 테스트:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c"># HTTP 헤더 확인</span>
curl <span class="nt">-I</span> http://localhost/

<span class="c"># 응답 본문 확인</span>
curl http://localhost/

<span class="c"># 정적 파일 테스트 (파일이 있는 경우)</span>
curl <span class="nt">-I</span> http://localhost/images/test.jpg
</pre></td></tr></tbody></table></code></div></div> <p><strong>외부 브라우저에서 테스트:</strong></p> <p>브라우저에서 <code class="language-plaintext highlighter-rouge">http://&lt;EC2_Public_IP&gt;/</code> 접속 → <code class="language-plaintext highlighter-rouge">"welcome"</code> 확인</p> <h3 id="nginx-관리-명령어"><span class="me-2">Nginx 관리 명령어</span><a href="#nginx-관리-명령어" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c"># 설정 변경 후 문법 검증</span>
<span class="nb">sudo </span>nginx <span class="nt">-t</span>

<span class="c"># 무중단 설정 리로드 (권장)</span>
<span class="nb">sudo </span>systemctl reload nginx

<span class="c"># Nginx 재시작</span>
<span class="nb">sudo </span>systemctl restart nginx

<span class="c"># Nginx 중지</span>
<span class="nb">sudo </span>systemctl stop nginx

<span class="c"># Nginx 시작</span>
<span class="nb">sudo </span>systemctl start nginx

<span class="c"># 로그 확인</span>
<span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/access.log
<span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/error.log
</pre></td></tr></tbody></table></code></div></div> <blockquote> <p>⚠️ <strong>주의</strong>: 설정을 변경할 때는 항상 <code class="language-plaintext highlighter-rouge">sudo nginx -t</code>로 검증한 후 적용하세요.</p> </blockquote> <hr /> <h2 id="6-정적-파일-배치"><span class="me-2">6) 정적 파일 배치</span><a href="#6-정적-파일-배치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <h3 id="정적-파일-디렉토리-구조"><span class="me-2">정적 파일 디렉토리 구조</span><a href="#정적-파일-디렉토리-구조" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>/home/ubuntu/reactbase/
├── server.py
├── venv/
└── public/              ← 정적 파일 저장 위치
    ├── logo.png
    ├── favicon.ico
    └── images/
        ├── banner.jpg
        └── profile.png
</pre></td></tr></tbody></table></code></div></div> <h3 id="파일-업로드-방법"><span class="me-2">파일 업로드 방법</span><a href="#파일-업로드-방법" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>방법 1: SCP로 파일 전송 (Linux/Mac)</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c"># 단일 파일 업로드</span>
scp <span class="nt">-i</span> /경로/키.pem logo.png ubuntu@&lt;EC2_Public_IP&gt;:/home/ubuntu/reactbase/public/

<span class="c"># 폴더 전체 업로드</span>
scp <span class="nt">-i</span> /경로/키.pem <span class="nt">-r</span> images/ ubuntu@&lt;EC2_Public_IP&gt;:/home/ubuntu/reactbase/public/
</pre></td></tr></tbody></table></code></div></div> <p><strong>방법 2: Windows PowerShell</strong></p> <div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c"># SCP 사용</span><span class="w">
</span><span class="n">scp</span><span class="w"> </span><span class="nt">-i</span><span class="w"> </span><span class="nx">C:\</span><span class="err">경로</span><span class="nx">\</span><span class="err">키</span><span class="o">.</span><span class="nf">pem</span><span class="w"> </span><span class="nx">logo.png</span><span class="w"> </span><span class="nx">ubuntu</span><span class="err">@&lt;</span><span class="nx">EC2_Public_IP</span><span class="err">&gt;</span><span class="p">:</span><span class="nx">/home/ubuntu/reactbase/public/</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div> <p><strong>방법 3: 서버에서 직접 생성</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c"># 테스트용 더미 파일 생성</span>
<span class="nb">cd</span> ~/reactbase/public
<span class="nb">echo</span> <span class="s2">"test"</span> <span class="o">&gt;</span> test.txt
</pre></td></tr></tbody></table></code></div></div> <h3 id="접근-경로-매핑"><span class="me-2">접근 경로 매핑</span><a href="#접근-경로-매핑" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="table-wrapper"><table> <thead> <tr> <th>실제 파일 경로</th> <th>웹 브라우저 URL</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">/home/ubuntu/reactbase/public/logo.png</code></td> <td><code class="language-plaintext highlighter-rouge">http://&lt;EC2_IP&gt;/images/logo.png</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">/home/ubuntu/reactbase/public/favicon.ico</code></td> <td><code class="language-plaintext highlighter-rouge">http://&lt;EC2_IP&gt;/images/favicon.ico</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">/home/ubuntu/reactbase/public/images/banner.jpg</code></td> <td><code class="language-plaintext highlighter-rouge">http://&lt;EC2_IP&gt;/images/images/banner.jpg</code></td> </tr> </tbody> </table></div> <h3 id="장점"><span class="me-2">장점</span><a href="#장점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <ul> <li><strong>성능 향상</strong>: Nginx가 직접 서빙하므로 애플리케이션 서버를 거치지 않음</li> <li><strong>효율성</strong>: Python 프로세스의 CPU/메모리 낭비 없음</li> <li><strong>캐싱</strong>: Nginx 레벨에서 브라우저 캐시 헤더 설정 가능</li> <li><strong>대용량 파일</strong>: 이미지, 비디오 등 대용량 파일도 효율적으로 서빙</li> </ul> <blockquote> <p>💡 <strong>Tip</strong>: HTML/CSS/JS 파일을 빌드한 프론트엔드 자산도 여기에 배치할 수 있습니다.</p> </blockquote> <hr /> <h2 id="7-vscode-sftp로-배포-자동화"><span class="me-2">7) VSCode SFTP로 배포 자동화</span><a href="#7-vscode-sftp로-배포-자동화" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>VSCode SFTP 확장을 사용하면 파일 저장 시 자동으로 EC2 서버에 업로드할 수 있습니다.</p> <h3 id="sftp-확장-설치"><span class="me-2">SFTP 확장 설치</span><a href="#sftp-확장-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <ol> <li>VSCode 확장 탭에서 <strong>“SFTP”</strong> 검색</li> <li><strong>“SFTP/FTP sync”</strong> (작성자: Natizyskunk) 설치</li> </ol> <h3 id="설정-파일-생성"><span class="me-2">설정 파일 생성</span><a href="#설정-파일-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>로컬 프로젝트 루트에 <code class="language-plaintext highlighter-rouge">.vscode/sftp.json</code> 파일을 생성합니다:</p> <p><strong>Linux/Mac 사용자:</strong></p> <div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC2 WebServer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;EC2_Public_IP&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sftp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ubuntu"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remotePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/home/ubuntu/reactbase"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uploadOnSave"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"useTempFile"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"openSsh"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"privateKeyPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/Users/yourname/pem/my_key.pem"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">".vscode"</span><span class="p">,</span><span class="w">
    </span><span class="s2">".git"</span><span class="p">,</span><span class="w">
    </span><span class="s2">".DS_Store"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"venv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__pycache__"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"*.pyc"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div> <p><strong>Windows 사용자:</strong></p> <div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC2 WebServer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;EC2_Public_IP&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sftp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ubuntu"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remotePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/home/ubuntu/reactbase"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uploadOnSave"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"useTempFile"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"openSsh"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"privateKeyPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C:</span><span class="se">\\\\</span><span class="s2">Users</span><span class="se">\\\\</span><span class="s2">yourname</span><span class="se">\\\\</span><span class="s2">pem</span><span class="se">\\\\</span><span class="s2">my_key.pem"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">".vscode"</span><span class="p">,</span><span class="w">
    </span><span class="s2">".git"</span><span class="p">,</span><span class="w">
    </span><span class="s2">".DS_Store"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"venv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__pycache__"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"*.pyc"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div> <blockquote> <p>⚠️ <strong>Windows 중요</strong>: 경로의 백슬래시(<code class="language-plaintext highlighter-rouge">\</code>)는 <strong>4개(<code class="language-plaintext highlighter-rouge">\\\\</code>)</strong> 로 이스케이프해야 합니다!</p> <p>예: <code class="language-plaintext highlighter-rouge">C:\Users\john\key.pem</code> → <code class="language-plaintext highlighter-rouge">"C:\\\\Users\\\\john\\\\key.pem"</code></p> </blockquote> <h3 id="설정-항목-설명-1"><span class="me-2">설정 항목 설명</span><a href="#설정-항목-설명-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="table-wrapper"><table> <thead> <tr> <th>항목</th> <th>설명</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">name</code></td> <td>연결 이름 (식별용)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">host</code></td> <td>EC2 Public IP</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">remotePath</code></td> <td>서버의 프로젝트 디렉토리 경로</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">uploadOnSave</code></td> <td><code class="language-plaintext highlighter-rouge">true</code>로 설정 시 파일 저장 시 자동 업로드</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">privateKeyPath</code></td> <td>PEM 키 파일의 절대 경로</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">ignore</code></td> <td>업로드 제외할 파일/폴더 패턴</td> </tr> </tbody> </table></div> <h3 id="사용-방법"><span class="me-2">사용 방법</span><a href="#사용-방법" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <ol> <li><strong>파일 수정 후 저장</strong> (<code class="language-plaintext highlighter-rouge">Ctrl+S</code> 또는 <code class="language-plaintext highlighter-rouge">Cmd+S</code>)</li> <li>자동으로 EC2 서버에 업로드됨</li> <li>서비스 재시작으로 변경사항 반영:</li> </ol> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl restart fastapi.service
</pre></td></tr></tbody></table></code></div></div> <h3 id="sftp-수동-명령어"><span class="me-2">SFTP 수동 명령어</span><a href="#sftp-수동-명령어" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>VSCode 명령 팔레트 (<code class="language-plaintext highlighter-rouge">Ctrl+Shift+P</code> 또는 <code class="language-plaintext highlighter-rouge">Cmd+Shift+P</code>)에서:</p> <ul> <li><strong>SFTP: Upload File</strong> - 현재 파일 업로드</li> <li><strong>SFTP: Upload Folder</strong> - 폴더 전체 업로드</li> <li><strong>SFTP: Download File</strong> - 서버에서 파일 다운로드</li> <li><strong>SFTP: Sync Local → Remote</strong> - 로컬을 서버로 동기화</li> <li><strong>SFTP: Sync Remote → Local</strong> - 서버를 로컬로 동기화</li> </ul> <h3 id="트러블슈팅"><span class="me-2">트러블슈팅</span><a href="#트러블슈팅" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>문제: “All configured authentication methods failed”</strong></p> <ul> <li>PEM 키 경로가 올바른지 확인</li> <li>Windows에서 백슬래시 이스케이프 확인 (<code class="language-plaintext highlighter-rouge">\\\\</code>)</li> <li>PEM 파일 권한 확인 (Linux/Mac: <code class="language-plaintext highlighter-rouge">chmod 400 키.pem</code>)</li> </ul> <p><strong>문제: “Permission denied”</strong></p> <ul> <li>EC2 보안 그룹에서 22번 포트(SSH) 허용 확인</li> <li><code class="language-plaintext highlighter-rouge">username</code>이 <code class="language-plaintext highlighter-rouge">ubuntu</code>인지 확인 (Ubuntu AMI의 기본 사용자)</li> </ul> <p><strong>배포 후 변경사항이 반영되지 않음:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c"># FastAPI 서비스 재시작 필요</span>
<span class="nb">sudo </span>systemctl restart fastapi.service

<span class="c"># 로그 확인</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> fastapi.service <span class="nt">-n</span> 50
</pre></td></tr></tbody></table></code></div></div> <blockquote> <p>💡 <strong>Tip</strong>: <code class="language-plaintext highlighter-rouge">uploadOnSave: true</code>로 설정하면 개발 속도가 크게 향상됩니다!</p> </blockquote> <hr /> <h2 id="8-운영-체크리스트--트러블슈팅"><span class="me-2">8) 운영 체크리스트 &amp; 트러블슈팅</span><a href="#8-운영-체크리스트--트러블슈팅" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <h3 id="a-보안-그룹네트워크"><span class="me-2">A. 보안 그룹/네트워크</span><a href="#a-보안-그룹네트워크" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>필수 포트 설정</strong></p> <div class="table-wrapper"><table> <thead> <tr> <th>포트</th> <th>상태</th> <th>용도</th> </tr> </thead> <tbody> <tr> <td>22</td> <td>열림</td> <td>SSH 접속</td> </tr> <tr> <td>80</td> <td>열림</td> <td>HTTP 웹 서비스</td> </tr> <tr> <td>8000</td> <td><strong>닫힘</strong></td> <td>외부 노출 불필요 (Nginx를 통해서만 접근)</td> </tr> </tbody> </table></div> <blockquote> <p>⚠️ <strong>주의</strong>: 8000 포트는 보안상 외부에 열지 마세요. 테스트가 필요한 경우에만 임시로 개방 후 즉시 닫으세요.</p> </blockquote> <p><strong>보안 그룹 확인 방법:</strong></p> <ol> <li>AWS 콘솔 → EC2 → 인스턴스 선택</li> <li><strong>보안</strong> 탭 → <strong>보안 그룹</strong> 클릭</li> <li><strong>인바운드 규칙</strong> 확인</li> </ol> <h3 id="b-isp통신사-차단-이슈"><span class="me-2">B. ISP/통신사 차단 이슈</span><a href="#b-isp통신사-차단-이슈" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>증상:</strong></p> <ul> <li>AWS 보안 그룹은 정상적으로 설정되어 있음</li> <li>서버 내부에서는 정상 접속 (<code class="language-plaintext highlighter-rouge">curl localhost</code>)</li> <li>외부에서 접속이 안 됨</li> </ul> <p><strong>원인 및 해결:</strong></p> <p>가정용 인터넷(KT, SKT, LG U+ 등)에서는 특정 포트가 <strong>ISP 레벨에서 차단</strong>될 수 있습니다.</p> <p><strong>해결 방법:</strong></p> <ol> <li><strong>휴대폰 핫스팟</strong>으로 전환하여 테스트</li> <li>접속이 되면 → ISP 차단 문제</li> <li>해결: <ul> <li>ISP에 문의하여 포트 개방 요청</li> <li>또는 443 포트(HTTPS) 사용</li> <li>VPN 사용</li> </ul> </li> </ol> <h3 id="c-ssh-접속-문제"><span class="me-2">C. SSH 접속 문제</span><a href="#c-ssh-접속-문제" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>문제: <code class="language-plaintext highlighter-rouge">Permission denied (publickey)</code></strong></p> <p><strong>원인 체크리스트:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c"># 1. PEM 키 파일이 올바른지 확인</span>
<span class="c"># EC2 인스턴스 생성 시 선택한 키 페어와 일치해야 함</span>

<span class="c"># 2. 파일 권한 확인 (Linux/Mac)</span>
<span class="nb">chmod </span>400 키.pem

<span class="c"># 3. 올바른 사용자명 사용</span>
<span class="c"># Ubuntu AMI: ubuntu</span>
<span class="c"># Amazon Linux: ec2-user</span>
ssh <span class="nt">-i</span> 키.pem ubuntu@&lt;IP&gt;

<span class="c"># 4. 보안 그룹에서 22번 포트 확인</span>
<span class="c"># 소스: 0.0.0.0/0 (또는 내 IP만)</span>
</pre></td></tr></tbody></table></code></div></div> <p><strong>Windows 특수 문제:</strong></p> <div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c"># PEM 파일 권한 설정 (PowerShell 관리자 권한)</span><span class="w">
</span><span class="n">icacls</span><span class="w"> </span><span class="s2">"C:\경로\키.pem"</span><span class="w"> </span><span class="nx">/inheritance:r</span><span class="w">
</span><span class="n">icacls</span><span class="w"> </span><span class="s2">"C:\경로\키.pem"</span><span class="w"> </span><span class="nx">/grant:r</span><span class="w"> </span><span class="s2">"%username%:R"</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div> <h3 id="d-nginx-문제-해결"><span class="me-2">D. Nginx 문제 해결</span><a href="#d-nginx-문제-해결" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>문제: 502 Bad Gateway</strong></p> <p><strong>원인:</strong></p> <ul> <li>FastAPI 서비스가 실행 중이지 않음</li> <li>포트 불일치 (Nginx는 8000으로 프록시하는데 Uvicorn은 다른 포트에서 실행)</li> </ul> <p><strong>해결:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c"># FastAPI 서비스 상태 확인</span>
<span class="nb">sudo </span>systemctl status fastapi.service

<span class="c"># 서비스가 실패했다면 로그 확인</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> fastapi.service <span class="nt">-n</span> 100

<span class="c"># 포트 확인 (8000 포트에서 리스닝 중인지)</span>
<span class="nb">sudo </span>netstat <span class="nt">-tulpn</span> | <span class="nb">grep</span> :8000
<span class="c"># 또는</span>
<span class="nb">sudo </span>ss <span class="nt">-tulpn</span> | <span class="nb">grep</span> :8000

<span class="c"># 서비스 재시작</span>
<span class="nb">sudo </span>systemctl restart fastapi.service
</pre></td></tr></tbody></table></code></div></div> <p><strong>문제: Nginx 설정 오류</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c"># 설정 파일 문법 검증</span>
<span class="nb">sudo </span>nginx <span class="nt">-t</span>

<span class="c"># 자주 발생하는 오류:</span>
<span class="c"># 1. 세미콜론(;) 누락</span>
<span class="c"># 2. 중괄호 불일치</span>
<span class="c"># 3. 파일 경로 오타</span>

<span class="c"># 로그 확인</span>
<span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/error.log
</pre></td></tr></tbody></table></code></div></div> <p><strong>문제: 정적 파일(이미지) 404</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c"># 디렉토리 권한 확인</span>
<span class="nb">ls</span> <span class="nt">-ld</span> /home/ubuntu/reactbase/public/
<span class="nb">ls</span> <span class="nt">-l</span> /home/ubuntu/reactbase/public/

<span class="c"># Nginx 사용자가 접근 가능해야 함</span>
<span class="c"># 권한 문제라면:</span>
<span class="nb">chmod </span>755 /home/ubuntu/reactbase/public/
<span class="nb">chmod </span>644 /home/ubuntu/reactbase/public/<span class="k">*</span>

<span class="c"># Nginx 설정에서 alias 경로 확인</span>
<span class="c"># 끝에 슬래시(/) 필수!</span>
<span class="c"># location /images/ {</span>
<span class="c">#     alias /home/ubuntu/reactbase/public/;</span>
<span class="c"># }</span>
</pre></td></tr></tbody></table></code></div></div> <h3 id="e-fastapiuvicorn-문제-해결"><span class="me-2">E. FastAPI/Uvicorn 문제 해결</span><a href="#e-fastapiuvicorn-문제-해결" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>서비스 관리:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c"># 상태 확인</span>
<span class="nb">sudo </span>systemctl status fastapi.service

<span class="c"># 로그 확인 (최근 200줄)</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> fastapi.service <span class="nt">-n</span> 200

<span class="c"># 실시간 로그 모니터링</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> fastapi.service <span class="nt">-f</span>

<span class="c"># 서비스 재시작</span>
<span class="nb">sudo </span>systemctl restart fastapi.service

<span class="c"># 서비스 파일 수정 후 리로드</span>
<span class="nb">sudo </span>systemctl daemon-reload
</pre></td></tr></tbody></table></code></div></div> <p><strong>성능 최적화 - Worker 프로세스:</strong></p> <p>CPU 코어 수에 따라 worker 수 조정:</p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c"># CPU 코어 수 확인</span>
<span class="nb">nproc</span>
</pre></td></tr></tbody></table></code></div></div> <p><code class="language-plaintext highlighter-rouge">/etc/systemd/system/fastapi.service</code> 수정:</p> <div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c"># 코어가 2개라면 workers=2 또는 3
</span><span class="py">ExecStart</span><span class="p">=</span><span class="s">/home/ubuntu/reactbase/venv/bin/uvicorn server:app </span><span class="se">\
</span>    <span class="s">--host 0.0.0.0 </span><span class="se">\
</span>    <span class="s">--port 8000 </span><span class="se">\
</span>    <span class="s">--workers 2 </span><span class="se">\
</span>    <span class="s">--proxy-headers </span><span class="se">\
</span>    <span class="s">--forwarded-allow-ips="*"</span>
</pre></td></tr></tbody></table></code></div></div> <blockquote> <p>💡 <strong>권장</strong>: <code class="language-plaintext highlighter-rouge">workers = (2 × CPU 코어 수) + 1</code></p> </blockquote> <p><strong>Python 모듈 오류:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c"># 가상환경 활성화 후 패키지 재설치</span>
<span class="nb">cd</span> ~/reactbase
<span class="nb">source </span>venv/bin/activate
pip <span class="nb">install</span> <span class="nt">--upgrade</span> pip
pip <span class="nb">install </span>fastapi uvicorn[standard]
</pre></td></tr></tbody></table></code></div></div> <h3 id="f-재부팅-후-자동-시작-확인"><span class="me-2">F. 재부팅 후 자동 시작 확인</span><a href="#f-재부팅-후-자동-시작-확인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c"># 자동 시작 활성화 상태 확인</span>
<span class="nb">sudo </span>systemctl is-enabled fastapi.service
<span class="c"># 출력: enabled (활성화됨)</span>
<span class="c"># 출력: disabled (비활성화됨)</span>

<span class="c"># 비활성화되어 있다면:</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>fastapi.service

<span class="c"># 재부팅 테스트</span>
<span class="nb">sudo </span>reboot

<span class="c"># 재접속 후 확인</span>
<span class="nb">sudo </span>systemctl status fastapi.service
<span class="nb">sudo </span>systemctl status nginx
</pre></td></tr></tbody></table></code></div></div> <h3 id="g-모니터링--로그"><span class="me-2">G. 모니터링 &amp; 로그</span><a href="#g-모니터링--로그" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>시스템 리소스 확인:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c"># CPU, 메모리 사용량 실시간 모니터링</span>
htop
<span class="c"># 또는</span>
top

<span class="c"># 디스크 사용량</span>
<span class="nb">df</span> <span class="nt">-h</span>

<span class="c"># 메모리 사용량</span>
free <span class="nt">-h</span>
</pre></td></tr></tbody></table></code></div></div> <p><strong>로그 위치:</strong></p> <div class="table-wrapper"><table> <thead> <tr> <th>서비스</th> <th>로그 위치</th> </tr> </thead> <tbody> <tr> <td>FastAPI</td> <td><code class="language-plaintext highlighter-rouge">sudo journalctl -u fastapi.service</code></td> </tr> <tr> <td>Nginx 액세스</td> <td><code class="language-plaintext highlighter-rouge">/var/log/nginx/access.log</code></td> </tr> <tr> <td>Nginx 에러</td> <td><code class="language-plaintext highlighter-rouge">/var/log/nginx/error.log</code></td> </tr> <tr> <td>시스템</td> <td><code class="language-plaintext highlighter-rouge">/var/log/syslog</code></td> </tr> </tbody> </table></div> <p><strong>로그 모니터링 명령어:</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c"># FastAPI 실시간 로그</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> fastapi.service <span class="nt">-f</span>

<span class="c"># Nginx 액세스 로그 실시간</span>
<span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/access.log

<span class="c"># Nginx 에러 로그 실시간</span>
<span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/error.log

<span class="c"># 여러 로그 동시 모니터링</span>
<span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/access.log /var/log/nginx/error.log
</pre></td></tr></tbody></table></code></div></div> <hr /> <h2 id="9-https선택--곧바로-운영-반영-시-권장"><span class="me-2">9) HTTPS(선택) — 곧바로 운영 반영 시 권장</span><a href="#9-https선택--곧바로-운영-반영-시-권장" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>운영 환경에서는 보안을 위해 <strong>HTTPS</strong>를 사용해야 합니다.</p> <p>도메인이 있다면 <strong>Let’s Encrypt(certbot)</strong>으로 무료 SSL/TLS 인증서를 발급받을 수 있습니다.</p> <h3 id="사전-준비"><span class="me-2">사전 준비</span><a href="#사전-준비" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <ol> <li><strong>도메인 필요</strong>: 도메인을 구매하고 EC2 Public IP를 가리키도록 DNS A 레코드 설정</li> <li><strong>방화벽</strong>: 보안 그룹에서 <strong>443 포트(HTTPS)</strong> 추가 개방</li> </ol> <div class="table-wrapper"><table> <thead> <tr> <th>포트</th> <th>프로토콜</th> <th>소스</th> <th>용도</th> </tr> </thead> <tbody> <tr> <td>443</td> <td>TCP</td> <td>0.0.0.0/0</td> <td>HTTPS</td> </tr> </tbody> </table></div> <h3 id="certbot-설치-및-인증서-발급"><span class="me-2">Certbot 설치 및 인증서 발급</span><a href="#certbot-설치-및-인증서-발급" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># Certbot 및 Nginx 플러그인 설치</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> certbot python3-certbot-nginx

<span class="c"># SSL 인증서 자동 발급 및 Nginx 설정</span>
<span class="nb">sudo </span>certbot <span class="nt">--nginx</span> <span class="nt">-d</span> your.domain.com

<span class="c"># 여러 도메인을 동시에 지원하는 경우</span>
<span class="nb">sudo </span>certbot <span class="nt">--nginx</span> <span class="nt">-d</span> your.domain.com <span class="nt">-d</span> www.your.domain.com
</pre></td></tr></tbody></table></code></div></div> <p><strong>대화형 프롬프트:</strong></p> <ol> <li>이메일 입력 (인증서 만료 알림용)</li> <li>이용약관 동의</li> <li>HTTP → HTTPS 리다이렉트 설정 여부 (권장: Yes)</li> </ol> <h3 id="설정-후-변경사항"><span class="me-2">설정 후 변경사항</span><a href="#설정-후-변경사항" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>Certbot이 자동으로 Nginx 설정을 수정합니다:</p> <div class="language-nginx highlighter-rouge"><div class="code-header"> <span data-label-text="Nginx"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">your.domain.com</span><span class="p">;</span>
    <span class="c1"># HTTP → HTTPS 리다이렉트 자동 추가</span>
    <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://</span><span class="nv">$server_name$request_uri</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span> <span class="s">http2</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">your.domain.com</span><span class="p">;</span>

    <span class="c1"># SSL 인증서 경로 (자동 설정됨)</span>
    <span class="kn">ssl_certificate</span> <span class="n">/etc/letsencrypt/live/your.domain.com/fullchain.pem</span><span class="p">;</span>
    <span class="kn">ssl_certificate_key</span> <span class="n">/etc/letsencrypt/live/your.domain.com/privkey.pem</span><span class="p">;</span>
    <span class="kn">include</span> <span class="n">/etc/letsencrypt/options-ssl-nginx.conf</span><span class="p">;</span>
    <span class="kn">ssl_dhparam</span> <span class="n">/etc/letsencrypt/ssl-dhparams.pem</span><span class="p">;</span>

    <span class="c1"># 기존 location 블록들...</span>
    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span>
        <span class="kn">proxy_pass</span> <span class="s">http://127.0.0.1:8000</span><span class="p">;</span>
        <span class="c1"># ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <h3 id="인증서-자동-갱신"><span class="me-2">인증서 자동 갱신</span><a href="#인증서-자동-갱신" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>Let’s Encrypt 인증서는 <strong>90일</strong> 유효기간을 가집니다.</p> <p>Certbot은 자동 갱신 타이머를 설정합니다:</p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c"># 자동 갱신 타이머 상태 확인</span>
<span class="nb">sudo </span>systemctl status certbot.timer

<span class="c"># 갱신 테스트 (실제로 갱신하지 않고 테스트만)</span>
<span class="nb">sudo </span>certbot renew <span class="nt">--dry-run</span>

<span class="c"># 수동 갱신 (필요한 경우)</span>
<span class="nb">sudo </span>certbot renew
</pre></td></tr></tbody></table></code></div></div> <h3 id="https-동작-확인"><span class="me-2">HTTPS 동작 확인</span><a href="#https-동작-확인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c"># 로컬에서 테스트</span>
curl <span class="nt">-I</span> https://your.domain.com

<span class="c"># SSL 인증서 정보 확인</span>
openssl s_client <span class="nt">-connect</span> your.domain.com:443 <span class="nt">-servername</span> your.domain.com
</pre></td></tr></tbody></table></code></div></div> <p><strong>브라우저에서 확인:</strong></p> <ul> <li><code class="language-plaintext highlighter-rouge">https://your.domain.com</code> 접속</li> <li>주소창에 자물쇠 아이콘 확인</li> <li>인증서 정보 확인</li> </ul> <h3 id="추가-보안-설정-선택"><span class="me-2">추가 보안 설정 (선택)</span><a href="#추가-보안-설정-선택" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>HTTPS 설정 후 추가 보안 헤더를 Nginx에 추가할 수 있습니다:</p> <div class="language-nginx highlighter-rouge"><div class="code-header"> <span data-label-text="Nginx"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span> <span class="s">http2</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">your.domain.com</span><span class="p">;</span>

    <span class="c1"># HSTS (HTTP Strict Transport Security)</span>
    <span class="kn">add_header</span> <span class="s">Strict-Transport-Security</span> <span class="s">"max-age=31536000</span><span class="p">;</span> <span class="kn">includeSubDomains"</span> <span class="s">always</span><span class="p">;</span>

    <span class="c1"># 기존 보안 헤더들...</span>
    <span class="kn">add_header</span> <span class="s">X-Content-Type-Options</span> <span class="s">nosniff</span><span class="p">;</span>
    <span class="kn">add_header</span> <span class="s">X-Frame-Options</span> <span class="s">DENY</span><span class="p">;</span>
    <span class="kn">add_header</span> <span class="s">X-XSS-Protection</span> <span class="s">"1</span><span class="p">;</span> <span class="kn">mode=block"</span><span class="p">;</span>

    <span class="c1"># ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div> <p>설정 후 Nginx 리로드:</p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>nginx <span class="nt">-t</span>
<span class="nb">sudo </span>systemctl reload nginx
</pre></td></tr></tbody></table></code></div></div> <blockquote> <p>💡 <strong>Tip</strong>: 도메인이 없어도 Self-Signed 인증서로 HTTPS를 사용할 수 있지만, 브라우저에서 경고가 표시됩니다.</p> </blockquote> <hr /> <h2 id="10-최종-점검-시나리오"><span class="me-2">10) 최종 점검 시나리오</span><a href="#10-최종-점검-시나리오" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>전체 설정이 완료되었다면 아래 체크리스트로 동작을 확인하세요.</p> <h3 id="체크리스트"><span class="me-2">체크리스트</span><a href="#체크리스트" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>1. 서비스 상태 확인</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c"># FastAPI 서비스 확인</span>
<span class="nb">sudo </span>systemctl status fastapi.service
<span class="c"># 출력: active (running) 이어야 함</span>

<span class="c"># Nginx 서비스 확인</span>
<span class="nb">sudo </span>systemctl status nginx
<span class="c"># 출력: active (running) 이어야 함</span>

<span class="c"># 포트 리스닝 확인</span>
<span class="nb">sudo </span>netstat <span class="nt">-tulpn</span> | <span class="nb">grep</span> <span class="nt">-E</span> <span class="s1">':80|:8000'</span>
<span class="c"># 80 포트: nginx</span>
<span class="c"># 8000 포트: uvicorn</span>
</pre></td></tr></tbody></table></code></div></div> <p><strong>2. 로컬 테스트 (EC2 서버 내부)</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c"># Uvicorn 직접 접근 테스트</span>
curl <span class="nt">-s</span> http://127.0.0.1:8000/
<span class="c"># 출력: welcome</span>

<span class="c"># Nginx를 통한 접근 테스트</span>
curl <span class="nt">-I</span> http://localhost/
<span class="c"># 출력: HTTP/1.1 200 OK</span>

curl http://localhost/
<span class="c"># 출력: welcome</span>

<span class="c"># 헬스 체크 엔드포인트</span>
curl http://localhost/health
<span class="c"># 출력: {"status":"healthy","service":"fastapi"}</span>

<span class="c"># 추가 엔드포인트 테스트</span>
curl http://localhost/hello  <span class="c"># 출력: hello</span>
curl http://localhost/world  <span class="c"># 출력: world</span>
</pre></td></tr></tbody></table></code></div></div> <p><strong>3. 외부 접근 테스트 (브라우저)</strong></p> <p>로컬 PC 브라우저에서 다음 URL 접속:</p> <ul> <li><code class="language-plaintext highlighter-rouge">http://&lt;EC2_Public_IP&gt;/</code> → <code class="language-plaintext highlighter-rouge">"welcome"</code> 출력 확인</li> <li><code class="language-plaintext highlighter-rouge">http://&lt;EC2_Public_IP&gt;/hello</code> → <code class="language-plaintext highlighter-rouge">"hello"</code> 출력 확인</li> <li><code class="language-plaintext highlighter-rouge">http://&lt;EC2_Public_IP&gt;/health</code> → JSON 응답 확인</li> <li><code class="language-plaintext highlighter-rouge">http://&lt;EC2_Public_IP&gt;/docs</code> → FastAPI 자동 생성 API 문서 확인</li> </ul> <p><strong>4. 정적 파일 테스트</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c"># 테스트 파일 생성</span>
<span class="nb">echo</span> <span class="s2">"Static file test"</span> <span class="o">&gt;</span> ~/reactbase/public/test.txt

<span class="c"># 서버 내부에서 테스트</span>
curl http://localhost/images/test.txt

<span class="c"># 외부 브라우저에서 테스트</span>
<span class="c"># http://&lt;EC2_Public_IP&gt;/images/test.txt</span>
</pre></td></tr></tbody></table></code></div></div> <p><strong>5. 개발 워크플로우 테스트</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c"># 1. 로컬에서 server.py 수정</span>
<span class="c"># 예: 새 엔드포인트 추가</span>

<span class="c"># 2. VSCode에서 저장 (자동 업로드)</span>

<span class="c"># 3. 서비스 재시작</span>
<span class="nb">sudo </span>systemctl restart fastapi.service

<span class="c"># 4. 변경사항 확인</span>
curl http://localhost/새로운엔드포인트
</pre></td></tr></tbody></table></code></div></div> <p><strong>6. 재부팅 테스트</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c"># 서버 재부팅</span>
<span class="nb">sudo </span>reboot

<span class="c"># 재접속 후 (약 1-2분 후)</span>
ssh <span class="nt">-i</span> 키.pem ubuntu@&lt;EC2_Public_IP&gt;

<span class="c"># 자동 시작 확인</span>
<span class="nb">sudo </span>systemctl status fastapi.service
<span class="nb">sudo </span>systemctl status nginx

<span class="c"># 외부 접근 확인</span>
curl http://localhost/
</pre></td></tr></tbody></table></code></div></div> <h3 id="성공-기준"><span class="me-2">성공 기준</span><a href="#성공-기준" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>✅ <strong>모든 서비스가 <code class="language-plaintext highlighter-rouge">active (running)</code> 상태</strong></p> <p>✅ <strong>로컬에서 모든 엔드포인트 정상 응답</strong></p> <p>✅ <strong>외부 브라우저에서 접근 가능</strong></p> <p>✅ <strong>정적 파일 서빙 정상 동작</strong></p> <p>✅ <strong>재부팅 후 자동 시작 확인</strong></p> <h3 id="문제-발생-시"><span class="me-2">문제 발생 시</span><a href="#문제-발생-시" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>문제가 발생하면 <a href="#8-운영-체크리스트--트러블슈팅">8) 운영 체크리스트 &amp; 트러블슈팅</a> 섹션을 참고하세요.</p> <hr /> <h2 id="-결론"><span class="me-2">📌 결론</span><a href="#-결론" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <h3 id="구축한-아키텍처-요약"><span class="me-2">구축한 아키텍처 요약</span><a href="#구축한-아키텍처-요약" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>이 가이드를 통해 다음과 같은 <strong>프로덕션 수준의 웹 서버 환경</strong>을 구축했습니다:</p> <div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>┌─────────────────────────────────────────┐
│             Internet                     │
└──────────────┬──────────────────────────┘
               │ Port 80 (HTTP)
               │
┌──────────────▼──────────────────────────┐
│        AWS EC2 (Ubuntu)                  │
│  ┌────────────────────────────────────┐  │
│  │  Nginx (Reverse Proxy)             │  │
│  │  - Security Headers                │  │
│  │  - Static File Serving             │  │
│  │  - Load Balancing (확장 가능)      │  │
│  └──────────┬─────────────────────────┘  │
│             │ 127.0.0.1:8000              │
│  ┌──────────▼─────────────────────────┐  │
│  │  FastAPI (Uvicorn)                 │  │
│  │  - systemd Auto-start              │  │
│  │  - Multi-worker Support            │  │
│  │  - Application Logic               │  │
│  └────────────────────────────────────┘  │
└─────────────────────────────────────────┘
</pre></td></tr></tbody></table></code></div></div> <h3 id="핵심-성과"><span class="me-2">핵심 성과</span><a href="#핵심-성과" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>✅ 보안</strong></p> <ul> <li>애플리케이션 서버(8000 포트)는 외부에 노출되지 않음</li> <li>Nginx를 통한 요청 필터링 및 보안 헤더 설정</li> <li>HTTPS 적용 가능 (Let’s Encrypt)</li> </ul> <p><strong>✅ 안정성</strong></p> <ul> <li>systemd로 재부팅 시 자동 시작</li> <li>프로세스 실패 시 자동 재시작</li> <li>헬스 체크 엔드포인트로 모니터링 가능</li> </ul> <p><strong>✅ 성능</strong></p> <ul> <li>Nginx가 정적 파일을 직접 서빙 (애플리케이션 서버 부하 감소)</li> <li>Multi-worker 프로세스로 동시 처리 능력 향상</li> <li>브라우저 캐싱 설정으로 네트워크 트래픽 감소</li> </ul> <p><strong>✅ 개발 생산성</strong></p> <ul> <li>VSCode SFTP로 파일 저장 시 자동 배포</li> <li>FastAPI 자동 생성 API 문서 (<code class="language-plaintext highlighter-rouge">/docs</code>)</li> <li>journalctl로 실시간 로그 모니터링</li> </ul> <h3 id="실무-팁-요약"><span class="me-2">실무 팁 요약</span><a href="#실무-팁-요약" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p><strong>보안 그룹 설정</strong></p> <ul> <li>22 (SSH), 80 (HTTP), 443 (HTTPS)만 개방</li> <li>8000 포트는 외부에 열지 말 것</li> </ul> <p><strong>ISP 차단 문제</strong></p> <ul> <li>접속이 안 되면 휴대폰 핫스팟으로 테스트</li> <li>ISP 레벨 차단일 가능성 확인</li> </ul> <p><strong>Windows 사용자</strong></p> <ul> <li>SFTP 경로 백슬래시 4개 이스케이프 (<code class="language-plaintext highlighter-rouge">\\\\</code>)</li> <li>PEM 파일 권한 설정 (<code class="language-plaintext highlighter-rouge">icacls</code> 명령어)</li> </ul> <p><strong>로그 모니터링</strong></p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c"># FastAPI 로그</span>
<span class="nb">sudo </span>journalctl <span class="nt">-u</span> fastapi.service <span class="nt">-f</span>

<span class="c"># Nginx 로그</span>
<span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/error.log
</pre></td></tr></tbody></table></code></div></div> <h3 id="다음-단계-제안"><span class="me-2">다음 단계 제안</span><a href="#다음-단계-제안" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>현재 구축한 기본 환경을 바탕으로 다음 기능들을 추가할 수 있습니다:</p> <p><strong>1. HTTPS 적용</strong></p> <ul> <li>Let’s Encrypt로 무료 SSL 인증서</li> <li>HTTP → HTTPS 자동 리다이렉트</li> </ul> <p><strong>2. 데이터베이스 연동</strong></p> <ul> <li>PostgreSQL, MySQL, MongoDB 등</li> <li>RDS(관리형 데이터베이스) 사용 권장</li> </ul> <p><strong>3. 모니터링 &amp; 알림</strong></p> <ul> <li>CloudWatch 로그 전송</li> <li>Prometheus + Grafana</li> <li>에러 발생 시 이메일/Slack 알림</li> </ul> <p><strong>4. CI/CD 파이프라인</strong></p> <ul> <li>GitHub Actions로 자동 배포</li> <li>테스트 자동화</li> </ul> <p><strong>5. 컨테이너화</strong></p> <ul> <li>Docker로 애플리케이션 패키징</li> <li>ECS/EKS로 오케스트레이션</li> </ul> <p><strong>6. 부하 분산</strong></p> <ul> <li>Application Load Balancer (ALB)</li> <li>Auto Scaling Group</li> </ul> <p><strong>7. 백업 &amp; 재해 복구</strong></p> <ul> <li>데이터베이스 정기 백업</li> <li>AMI 스냅샷</li> <li>다중 AZ 배포</li> </ul> <h3 id="마무리"><span class="me-2">마무리</span><a href="#마무리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>이제 <strong>EC2에서 FastAPI + Nginx 리버스 프록시 구조</strong>로 안전하고 효율적인 웹 서비스를 운영할 수 있는 기반이 마련되었습니다.</p> <p><strong>systemd</strong> 자동 기동, <strong>SFTP</strong> 배포 자동화, <strong>트러블슈팅</strong> 가이드까지 실무에서 바로 활용할 수 있는 내용을 담았습니다.</p> <p>운영하면서 발생하는 이슈들은 이 가이드의 트러블슈팅 섹션을 참고하시고, 추가 질문이 있다면 AWS 공식 문서나 커뮤니티를 활용하세요!</p> <p><strong>행복한 배포 되세요!</strong> 🚀</p> <hr /> <h2 id="-참고-자료"><span class="me-2">📚 참고 자료</span><a href="#-참고-자료" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <ul> <li><a href="https://fastapi.tiangolo.com/">FastAPI 공식 문서</a></li> <li><a href="https://www.uvicorn.org/">Uvicorn 공식 문서</a></li> <li><a href="https://nginx.org/en/docs/">Nginx 공식 문서</a></li> <li><a href="https://www.freedesktop.org/software/systemd/man/systemd.service.html">systemd 서비스 관리</a></li> <li><a href="https://certbot.eff.org/">Let’s Encrypt (Certbot)</a></li> <li><a href="https://docs.aws.amazon.com/ec2/">AWS EC2 사용 설명서</a></li> </ul> <hr /> <p><strong>작성일</strong>: 2025년 10월 12일<br /> <strong>카테고리</strong>: DevOps, AWS<br /> <strong>태그</strong>: EC2, Nginx, FastAPI, Uvicorn, Ubuntu, systemd, ReverseProxy, SFTP</p> </div> <div class="post-tail-wrapper text-muted"> <!-- categories --> <div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/my-blog/categories/learning/">Learning</a> </div> <!-- tags --> <div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/my-blog/tags/aws/" class="post-tag no-text-decoration" >aws</a> <a href="/my-blog/tags/ec2/" class="post-tag no-text-decoration" >ec2</a> <a href="/my-blog/tags/nginx/" class="post-tag no-text-decoration" >nginx</a> <a href="/my-blog/tags/fastapi/" class="post-tag no-text-decoration" >fastapi</a> <a href="/my-blog/tags/uvicorn/" class="post-tag no-text-decoration" >uvicorn</a> <a href="/my-blog/tags/ubuntu/" class="post-tag no-text-decoration" >ubuntu</a> <a href="/my-blog/tags/systemd/" class="post-tag no-text-decoration" >systemd</a> <a href="/my-blog/tags/devops/" class="post-tag no-text-decoration" >devops</a> </div> <div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " > <div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다. </div> <!-- Post sharing snippet --> <div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=EC2%20%EC%84%9C%EB%B2%84%EC%97%90%20Nginx%EC%99%80%20Application%20Server(uvicorn/FastAPI)%20%EC%97%B0%EA%B2%B0%20%EC%84%A4%EC%A0%95,%20%EC%9A%B4%EC%98%81%20%ED%8C%81%EA%B9%8C%EC%A7%80%20-%20%EC%A0%95%ED%98%84%EB%A5%98%EC%9D%98%20%EA%B0%9C%EB%B0%9C%20%EB%B8%94%EB%A1%9C%EA%B7%B8&url=http%3A%2F%2Flocalhost%3A4000%2Fmy-blog%2Fposts%2Fec2-nginx-applcation%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fmy-blog%2Fposts%2Fec2-nginx-applcation%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Flocalhost%3A4000%2Fmy-blog%2Fposts%2Fec2-nginx-applcation%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="LinkedIn" aria-label="LinkedIn"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span> </div> </div> <!-- .post-tail-bottom --> </div> <!-- div.post-tail-wrapper --> </article> </main> <!-- panel --> <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"> <div class="access"> <!-- Get 5 last posted/updated posts --> <section id="access-lastmod"> <h2 class="panel-heading">최근 업데이트</h2> <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"> <li class="text-truncate lh-lg"> <a href="/my-blog/posts/wi-fi/">Wi-Fi 속도가 빠를수록 품질이 나빠지는 이유 ⭐⭐⭐</a> </li> <li class="text-truncate lh-lg"> <a href="/my-blog/posts/geeknews/">“튜토리얼 지옥”을 대체한 “바이브 코딩 지옥”의 등장 ⭐⭐⭐</a> </li> <li class="text-truncate lh-lg"> <a href="/my-blog/posts/ec2-nginx-applcation/">EC2 서버에 Nginx와 Application Server(uvicorn/FastAPI) 연결 설정, 운영 팁까지</a> </li> <li class="text-truncate lh-lg"> <a href="/my-blog/posts/study-aws/">AWS EC2 FastAPI 프로덕션 배포 완전 가이드</a> </li> <li class="text-truncate lh-lg"> <a href="/my-blog/posts/reddit-2350/">경쟁자가 Reddit 모더레이터가 되어 2,350만 달러 부트캠프를 무너뜨린 사건</a> </li> </ul> </section> <!-- #access-lastmod --> <!-- The trending tags list --> <section> <h2 class="panel-heading">인기 태그</h2> <div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/devops/">devops</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/food/">food</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/ec2/">ec2</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/ubuntu/">ubuntu</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/cooking/">cooking</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/python/">python</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/qa/">qa</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/quality-assurance/">quality-assurance</a> </div> </section> </div> <div class="toc-border-cover z-3"></div> <section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"> <h2 class="panel-heading ps-3 pb-2 mb-0">바로가기</h2> <nav id="toc"></nav> </section> </aside> </div> <div class="row"> <!-- tail --> <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post. --> <!-- The total size of related posts --> <!-- An random integer that bigger than 0 --> <!-- Equals to TAG_SCORE / {max_categories_hierarchy} --> <aside id="related-posts" aria-labelledby="related-label"> <h3 class="mb-4" id="related-label">관련된 글</h3> <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"> <article class="col"> <a href="/my-blog/posts/study-aws/" class="post-preview card h-100"> <div class="card-body"> <!-- Date format snippet See: ${JS_ROOT}/utils/locale-dateime.js --> <time data-ts="1760178600" data-df="YYYY/MM/DD" > 2025/10/11 </time> <h4 class="pt-0 my-2">AWS EC2 FastAPI 프로덕션 배포 완전 가이드</h4> <div class="text-muted"> <p>AWS EC2에서 FastAPI 애플리케이션을 프로덕션 수준으로 배포하는 완전한 기술 레퍼런스</p> </div> </div> </a> </article> <article class="col"> <a href="/my-blog/posts/study-aws/" class="post-preview card h-100"> <div class="card-body"> <!-- Date format snippet See: ${JS_ROOT}/utils/locale-dateime.js --> <time data-ts="1758726000" data-df="YYYY/MM/DD" > 2025/09/25 </time> <h4 class="pt-0 my-2">Jekyll 블로그 EC2 자동화 파이프라인 구축 로그</h4> <div class="text-muted"> <p>EC2에서 Jekyll 블로그 자동 발행 파이프라인을 구축하고 운영한 전체 과정 기술 메모</p> </div> </div> </a> </article> <article class="col"> <a href="/my-blog/posts/study-aws/" class="post-preview card h-100"> <div class="card-body"> <!-- Date format snippet See: ${JS_ROOT}/utils/locale-dateime.js --> <time data-ts="1758726000" data-df="YYYY/MM/DD" > 2025/09/25 </time> <h4 class="pt-0 my-2">Jekyll 블로그 EC2 자동화 파이프라인 구축 로그</h4> <div class="text-muted"> <p>EC2에서 Jekyll 블로그 자동 발행 파이프라인을 구축하고 운영한 전체 과정 기술 메모</p> </div> </div> </a> </article> </nav> </aside> <!-- #related-posts --> <!-- Navigation buttons at the bottom of the post. --> <nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/my-blog/posts/study-aws/" class="btn btn-outline-primary" aria-label="이전 글" > <p>AWS EC2 FastAPI 프로덕션 배포 완전 가이드</p> </a> <a href="/my-blog/posts/geeknews/" class="btn btn-outline-primary" aria-label="다음 글" > <p>“튜토리얼 지옥”을 대체한 “바이브 코딩 지옥”의 등장 ⭐⭐⭐</p> </a> </nav> <!-- The Footer --> <footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " > <p>© <time>2025</time> <a href="https://github.com/junghyunryu">정현류</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다." >일부 권리 보유</span> </p> <p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme </p> </footer> </div> </div> <!-- The Search results --> <div id="search-result-wrapper" class="d-flex justify-content-center d-none"> <div class="col-11 content"> <div id="search-hints"> <!-- The trending tags list --> <section> <h2 class="panel-heading">인기 태그</h2> <div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/devops/">devops</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/food/">food</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/ec2/">ec2</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/ubuntu/">ubuntu</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/cooking/">cooking</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/python/">python</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/qa/">qa</a> <a class="post-tag btn btn-outline-primary" href="/my-blog/tags/quality-assurance/">quality-assurance</a> </div> </section> </div> <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div> </div> </div> </div> <aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button> </aside> </div> <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div> <!-- Embedded scripts --> <!-- The comments switcher --> <!-- Jekyll Simple Search loader See: <https://github.com/christian-fei/Simple-Jekyll-Search> --> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/my-blog/assets/js/data/search.json', searchResultTemplate: ' <article class="px-1 px-sm-2 px-lg-4 px-xl-0"> <header> <h2><a href="{url}">{title}</a></h2> <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags} </div> </header> <p>{content}</p> </article>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script> </body> </html>
